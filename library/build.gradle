apply plugin: "com.android.library"

def localProperties = new Properties()
localProperties.load(rootProject.file("local.properties").newDataInputStream())

def versionProperties = new Properties()
versionProperties.load(rootProject.file("version.properties").newDataInputStream())

project.archivesBaseName = "alog"
group "ua.pp.ihorzak"
version versionProperties.getProperty("VERSION_NAME")

android {
    buildToolsVersion versions.buildTools

    compileSdkVersion versions.sdk.compile

    compileOptions {
        sourceCompatibility versions.javaVersions.source
        targetCompatibility versions.javaVersions.target
    }

    defaultConfig {
        minSdkVersion versions.sdk.min
        targetSdkVersion versions.sdk.target

        versionCode Integer.parseInt(versionProperties.getProperty("VERSION_CODE"))
        versionName versionProperties.getProperty("VERSION_NAME")
    }

    testOptions.unitTests.includeAndroidResources = true
}

dependencies {
    testImplementation "junit:junit:$versions.testDependencies.jUnit"
    testImplementation "org.robolectric:robolectric:$versions.testDependencies.robolectric"
}

task sourcesJar(type: Jar) {
    from android.sourceSets.main.java.srcDirs
    classifier = "sources"
}

task javadoc(type: Javadoc) {
    source = android.sourceSets.main.java.srcDirs
    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = "javadoc"
    from javadoc.destinationDir
}

artifacts {
    archives javadocJar
    archives sourcesJar
}